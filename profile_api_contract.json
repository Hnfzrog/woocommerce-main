{
  "profile_api_documentation": {
    "title": "Profile Management API",
    "version": "1.0.0",
    "base_url": "{{BASE_URL}}/api",
    "endpoints_summary": [
      "GET    /api/profile                    # Get profile data",
      "PUT    /api/profile                    # Update profile",
      "POST   /api/profile/photo              # Upload photo",
      "DELETE /api/profile/photo              # Delete photo",
      "POST   /api/profile/change-password    # Change password"
    ],
    "authentication": {
      "type": "Bearer Token",
      "header": "Authorization: Bearer {{TOKEN}}",
      "note": "All endpoints require authentication with Sanctum token"
    },
    "endpoints": {
      "get_profile": {
        "method": "GET",
        "url": "/profile",
        "description": "Mendapatkan data lengkap profile user yang sedang login",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {{TOKEN}}"
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Profile data berhasil diambil",
            "data": {
              "id": 1,
              "name": "John Doe",
              "email": "john@example.com",
              "phone": "08123456789",
              "profile_photo_url": "https://domain.com/storage/profile-photos/photo.jpg",
              "kode_pemesanan": "#1234567890",
              "package_info": {
                "id": 2,
                "name": "Gold Package",
                "jenis_paket": "gold",
                "price": 150000,
                "currency": "IDR",
                "payment_status": "paid",
                "is_active": true
              },
              "domain_info": {
                "domain": "john-wedding",
                "is_active": true,
                "expires_at": "2025-12-01T10:30:00.000000Z",
                "days_until_expiry": 92,
                "payment_confirmed_at": "2025-09-01T10:30:00.000000Z"
              },
              "created_at": "2025-08-01T10:30:00.000000Z",
              "updated_at": "2025-09-01T14:30:00.000000Z"
            }
          }
        },
        "response_error": {
          "status": 500,
          "body": {
            "success": false,
            "message": "Terjadi kesalahan saat mengambil data profile",
            "error": "Error message (if debug mode enabled)"
          }
        }
      },
      "update_profile": {
        "method": "PUT",
        "url": "/profile",
        "description": "Memperbarui data profile user (nama, email, nomor HP)",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {{TOKEN}}"
        },
        "request_body": {
          "name": "John Doe Updated",
          "email": "john.updated@example.com",
          "phone": "08987654321"
        },
        "validation_rules": {
          "name": {
            "required": true,
            "type": "string",
            "min_length": 2,
            "max_length": 255,
            "pattern": "Only letters and spaces allowed"
          },
          "email": {
            "required": true,
            "type": "email",
            "max_length": 255,
            "unique": "Must be unique across users (excluding current user)"
          },
          "phone": {
            "required": true,
            "type": "string",
            "min_length": 10,
            "max_length": 15,
            "pattern": "Indonesian phone format: +62, 62, or 0 followed by 9-13 digits"
          }
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Profile berhasil diperbarui",
            "data": {
              "id": 1,
              "name": "John Doe Updated",
              "email": "john.updated@example.com",
              "phone": "08987654321",
              "profile_photo_url": "https://domain.com/storage/profile-photos/photo.jpg",
              "package_info": {
                "id": 2,
                "name": "Gold Package",
                "jenis_paket": "gold",
                "price": 150000,
                "currency": "IDR",
                "payment_status": "paid",
                "is_active": true
              },
              "updated_at": "2025-09-01T14:35:00.000000Z"
            }
          }
        },
        "response_validation_error": {
          "status": 422,
          "body": {
            "message": "The given data was invalid.",
            "errors": {
              "name": ["Nama wajib diisi.", "Nama minimal 2 karakter."],
              "email": ["Format email tidak valid.", "Email sudah digunakan oleh pengguna lain."],
              "phone": ["Nomor HP wajib diisi.", "Format nomor HP tidak valid."]
            }
          }
        }
      },
      "upload_photo": {
        "method": "POST",
        "url": "/profile/photo",
        "description": "Upload foto profile user",
        "headers": {
          "Content-Type": "multipart/form-data",
          "Authorization": "Bearer {{TOKEN}}"
        },
        "request_body": {
          "profile_photo": "FILE (image file)"
        },
        "validation_rules": {
          "profile_photo": {
            "required": true,
            "type": "image",
            "allowed_formats": ["jpeg", "png", "jpg", "webp"],
            "max_size": "2MB",
            "dimensions": {
              "min_width": 100,
              "min_height": 100,
              "max_width": 2000,
              "max_height": 2000
            }
          }
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Foto profile berhasil diperbarui",
            "data": {
              "profile_photo_url": "https://domain.com/storage/profile-photos/new-photo.jpg",
              "updated_at": "2025-09-01T14:40:00.000000Z"
            }
          }
        },
        "response_validation_error": {
          "status": 422,
          "body": {
            "message": "The given data was invalid.",
            "errors": {
              "profile_photo": [
                "Foto profil wajib dipilih.",
                "Foto profil harus berformat JPEG, PNG, JPG, atau WEBP.",
                "Ukuran foto profil maksimal 2MB."
              ]
            }
          }
        }
      },
      "delete_photo": {
        "method": "DELETE",
        "url": "/profile/photo",
        "description": "Menghapus foto profile user",
        "headers": {
          "Authorization": "Bearer {{TOKEN}}"
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Foto profile berhasil dihapus",
            "data": {
              "profile_photo_url": null,
              "updated_at": "2025-09-01T14:45:00.000000Z"
            }
          }
        },
        "response_not_found": {
          "status": 404,
          "body": {
            "success": false,
            "message": "Tidak ada foto profile untuk dihapus"
          }
        }
      },
      "change_password": {
        "method": "POST",
        "url": "/profile/change-password",
        "description": "Mengubah password user",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {{TOKEN}}"
        },
        "request_body": {
          "current_password": "current_password_here",
          "new_password": "NewStrongPassword123!",
          "new_password_confirmation": "NewStrongPassword123!"
        },
        "validation_rules": {
          "current_password": {
            "required": true,
            "type": "string",
            "validation": "Must match user's current password"
          },
          "new_password": {
            "required": true,
            "type": "string",
            "min_length": 8,
            "requirements": [
              "At least one lowercase letter",
              "At least one uppercase letter",
              "At least one number",
              "At least one special character"
            ],
            "confirmed": "Must match new_password_confirmation"
          },
          "new_password_confirmation": {
            "required": true,
            "type": "string",
            "validation": "Must match new_password"
          }
        },
        "response_success": {
          "status": 200,
          "body": {
            "success": true,
            "message": "Kata sandi berhasil diperbarui",
            "data": {
              "updated_at": "2025-09-01T14:50:00.000000Z"
            }
          }
        },
        "response_validation_error": {
          "status": 422,
          "body": {
            "message": "The given data was invalid.",
            "errors": {
              "current_password": ["Kata sandi saat ini tidak benar."],
              "new_password": [
                "Kata sandi baru minimal 8 karakter.",
                "Konfirmasi kata sandi baru tidak cocok."
              ]
            }
          }
        }
      }
    },
    "common_responses": {
      "unauthorized": {
        "status": 401,
        "body": {
          "message": "Unauthenticated."
        }
      },
      "forbidden": {
        "status": 403,
        "body": {
          "message": "This action is unauthorized."
        }
      },
      "server_error": {
        "status": 500,
        "body": {
          "success": false,
          "message": "Terjadi kesalahan server",
          "error": "Error details (if debug enabled)"
        }
      }
    },
    "frontend_implementation_guide": {
      "setup": {
        "base_url": "Set your API base URL",
        "token_storage": "Store Sanctum token in localStorage or secure storage",
        "headers": "Always include Authorization header with Bearer token"
      },
      "form_handling": {
        "profile_form": {
          "fields": ["name", "email", "phone"],
          "validation": "Use client-side validation matching server rules",
          "submission": "PUT request to /profile endpoint"
        },
        "photo_upload": {
          "input_type": "file",
          "accepted_formats": ".jpeg,.png,.jpg,.webp",
          "max_size": "2MB",
          "preview": "Show image preview before upload",
          "submission": "POST multipart/form-data to /profile/photo"
        },
        "password_change": {
          "fields": ["current_password", "new_password", "new_password_confirmation"],
          "security": "Use password input types, validate strength",
          "submission": "POST to /profile/change-password"
        }
      },
      "error_handling": {
        "validation_errors": "Display field-specific errors from errors object",
        "server_errors": "Show general error message to user",
        "network_errors": "Handle offline/network issues gracefully"
      },
      "state_management": {
        "profile_data": "Store and update profile state after successful operations",
        "loading_states": "Show loading indicators during API calls",
        "success_feedback": "Show success messages after operations"
      }
    },
    "security_notes": {
      "authentication": "All endpoints require valid Sanctum token",
      "authorization": "Only user role can access these endpoints",
      "file_upload": "Images are validated for type, size, and dimensions",
      "password_change": "Current password verification required",
      "data_protection": "Sensitive data properly hidden in responses"
    },
    "testing_examples": {
      "postman_collection": {
        "environment_variables": {
          "BASE_URL": "http://localhost:8000/api",
          "TOKEN": "your_sanctum_token_here"
        },
        "test_scenarios": [
          "Get profile data",
          "Update profile with valid data",
          "Update profile with invalid data (validation test)",
          "Upload valid profile photo",
          "Upload invalid profile photo (validation test)",
          "Delete profile photo",
          "Change password with correct current password",
          "Change password with incorrect current password"
        ]
      }
    }
  }
}
